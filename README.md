# mastobot

ì§€ì •ëœ GitHub ì €ìž¥ì†Œì˜ ëŒ€ìƒ í´ë”ë¡œë¶€í„° ë§ˆí¬ë‹¤ìš´(`.md`) íŒŒì¼ë“¤ì„ ì½ì–´, ë¬´ìž‘ìœ„ë¡œ 1ê°œë¥¼ ì„ íƒí•´ Mastodon ì¸ìŠ¤í„´ìŠ¤ì— ê²Œì‹œí•˜ëŠ” ë´‡.

## í™˜ê²½ë³€ìˆ˜ (í•„ìˆ˜)

|	ë³€ìˆ˜ ì´ë¦„				|	ì„¤ëª…															|
|---------------------------|-------------------------------------------------------------------|
|	`GITHUB_REPO_OWNER`		|	GitHub ì €ìž¥ì†Œ ì†Œìœ ìž ì´ë¦„										|
|	`GITHUB_REPO_NAME`		|	GitHub ì €ìž¥ì†Œ ì´ë¦„												|
|	`GITHUB_REPO_ROOT`		|	ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì´ ìœ„ì¹˜í•œ ì €ìž¥ì†Œ ë‚´ ê²½ë¡œ (ë£¨íŠ¸ í´ë”ë©´ ë¹ˆ ë¬¸ìžì—´)	|
|	`MASTODON_BASE_URL`		|	Mastodon ì¸ìŠ¤í„´ìŠ¤ URL (ì˜ˆ: https://mastodon.social)				|
|	`MASTODON_ACCESS_TOKEN`	|	Mastodon ì¸ìŠ¤í„´ìŠ¤ ì•¡ì„¸ìŠ¤ í† í°									|

## ë´‡ ì‹¤í–‰ ë°©ë²•

ì´ ì €ìž¥ì†Œë¥¼ í´ë¡ í•œ í›„, ë‹¤ìŒ ì¤‘ í•˜ë‚˜ì˜ ë°©ë²•ì„ ì„ íƒí•´ì„œ ì‹¤í–‰í•œë‹¤.

### âœ… GitHub Actions í™œìš©

> GitHub Actions ê¸°ëŠ¥ìœ¼ë¡œ `mastobot.py` ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë°˜ë³µì‹¤í–‰í•˜ë¯€ë¡œ ì„œë²„ë‚˜ Docker í™˜ê²½ì´ í•„ìš”ì—†ë‹¤.

#### 1. ì˜ˆì•½ì‹¤í–‰ ì›Œí¬í”Œë¡œ ì„¤ì •

- `.github/workflows/cron.yaml.sample`ì˜ ì´ë¦„ì„ `.github/workflows/cron.yaml`ìœ¼ë¡œ ë³€ê²½í•œë‹¤.
- `cron.yaml` íŒŒì¼ì„ ìˆ˜ì •í•´ì„œ ì‹¤í–‰ ê°„ê²©ì„ ì„¤ì •í•œë‹¤.

#### 2. í™˜ê²½ë³€ìˆ˜ ë“±ë¡

`ì €ìž¥ì†Œ > Settings > Secrets and variables` ë©”ë‰´ì—ì„œ ì›í•˜ëŠ” ê°’ì„ ìž…ë ¥í•œë‹¤.

#### 3. ìžë™ì‹¤í–‰ í™•ì¸

GitHub Actions íƒ­ì—ì„œ ì˜ˆì•½ ì‹¤í–‰ ê²°ê³¼ë¥¼ í™•ì¸í•œë‹¤.

### ðŸ³ Dockerë¥¼ ì´ìš©í•œ ë¡œì»¬ ì‹¤í–‰

> Dockerê°€ ì„¤ì¹˜ëœ ì„œë²„ê°€ í•„ìš”í•˜ë‹¤.

#### 1. íŒ¨í‚¤ì§€ ë¹Œë“œ ì›Œí¬í”Œë¡œ ì„¤ì •

- `.github/workflows/publish.yaml.sample`ì˜ ì´ë¦„ì„ `.github/workflows/publish.yaml`ìœ¼ë¡œ ë³€ê²½í•œë‹¤.
- ì»¤ë°‹í•˜ë©´ Docker ì´ë¯¸ì§€ê°€ ìžë™ìœ¼ë¡œ ë¹Œë“œëœë‹¤.

#### 2. ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš©ìží™” ë° ì €ìž¥

- ðŸ‘‰ [pull_mastobot_and_run.sh](./resources/pull_mastobot_and_run.sh) íŒŒì¼ì„ ì„œë²„ì— ì—…ë¡œë“œí•œë‹¤.
- ì—…ë¡œë“œí•œ `pull_mastobot_and_run.sh` íŒŒì¼ì„ ì—´ì–´ í™˜ê²½ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•œë‹¤.

#### 3. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ê¶Œí•œ ë¶€ì—¬

```shell
chmod +x ./pull_mastobot_and_run.sh
```

#### 4. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰

```bash
./pull_mastobot_and_run.sh
```

#### 5. cron ì„¤ì • ì˜ˆì‹œ

ë§¤ì¼ ìƒˆë²½ 3ì‹œì— ìµœì‹  ì´ë¯¸ì§€ pull í›„ ì»¨í…Œì´ë„ˆ ìž¬ì‹œìž‘

```bash
0 3 * * * /path/to/pull_mastobot_and_run.sh >> /var/log/mastobot.log 2>&1
```